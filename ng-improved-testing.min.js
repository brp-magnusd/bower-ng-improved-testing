/*! ng-improved-testing 27-11-2014 */
!function(){"use strict";function a(){function a(a){if(!angular.isObject(a))return!1;for(var b in a){var c=a[b];if(angular.isFunction(c)&&"constructor"!==b&&c!==Object.prototype[b])return!0}return!1}function b(a){if(!c(a)&&!c(a.prototype,"constructor"))return jasmine.createSpy();var b=jasmine.createSpy();return e(a,b,!0),b.prototype=Object.create(a.prototype),e(a.prototype,b.prototype,!0,"constructor"),b.prototype.constructor=a.prototype.constructor,b}function c(a,b){for(var c in a)if(a.hasOwnProperty(c)&&(!b||-1===b.indexOf(c)))return!0;return!1}function d(a){var b={};return e(a,b,!1,"constructor"),b}function e(a,b,c,d){d=Array.prototype.slice.call(arguments,3);for(var e in a)if(!c||a.hasOwnProperty(e)){var f=a[e];!c&&(c||f===Object.prototype[e])||d&&-1!==d.indexOf(e)||(b[e]=angular.isFunction(f)?jasmine.createSpy(e):f)}}this.canInstanceBeMocked=function(b){return angular.isFunction(b)||a(b)},this.mockInstance=function(c){if(angular.isFunction(c))return b(c);if(a(c))return d(c);throw"Could not mock provided value: "+c}}function b(a,b){function c(c){function d(a,b,c,d,e){var f={providerName:a,componentName:b,componentKind:c};d&&(f.dependenciesUsage=d,f.dependencies=e),i.push(f)}function e(a){var b=h.getProviderComponentDeclaration("$provide",a).providerMethod;if("constant"===b||"value"===b)throw'Services declared with "contact" or "value" are not supported'}var f=angular.module(c),g=angular.injector(["ng","ngMock",c]),h=a(c),i=[];this.serviceWithMocks=function(a){return e(a),d("$provide",a,"withMocks"),this},this.serviceWithMocksFor=function(a,b){return e(a),b=Array.prototype.slice.call(arguments,1),d("$provide",a,"withMocks","for",b),this},this.serviceWithMocksExcept=function(a,b){return e(a),b=Array.prototype.slice.call(arguments,1),d("$provide",a,"withMocks","except",b),this},this.serviceAsIs=function(a){return d("$provide",a,"asIs"),this},this.filterWithMocks=function(a){return d("$filterProvider",a,"withMocks"),this},this.filterWithMocksFor=function(a,b){return d("$filterProvider",a,"withMocks","for",b),this},this.filterWithMocksExcept=function(a,b){return d("$filterProvider",a,"withMocks","except",b),this},this.filterAsIs=function(a){return d("$filterProvider",a,"asIs"),this},this.controllerWithMocks=function(a){return d("$controllerProvider",a,"withMocks"),this},this.controllerWithMocksFor=function(a,b){return b=Array.prototype.slice.call(arguments,1),d("$controllerProvider",a,"withMocks","for",b),this},this.controllerWithMocksExcept=function(a,b){return d("$controllerProvider",a,"withMocks","except",b),this},this.controllerAsIs=function(a){return d("$controllerProvider",a,"asIs"),this},this.directiveWithMocks=function(a){return d("$compileProvider",a,"withMocks"),this},this.directiveWithMocksFor=function(a,b){return b=Array.prototype.slice.call(arguments,1),d("$compileProvider",a,"withMocks","for",b),this},this.directiveWithMocksExcept=function(a,b){return d("$compileProvider",a,"withMocks","except",b),this},this.directiveAsIs=function(a){return d("$compileProvider",a,"asIs"),this},this.animationWithMocks=function(a){return d("$animateProvider",a,"withMocks"),this},this.animationWithMocksFor=function(a,b){return b=Array.prototype.slice.call(arguments,1),d("$animateProvider",a,"withMocks","for",b),this},this.animationWithMocksExcept=function(a,b){return d("$animateProvider",a,"withMocks","except",b),this},this.animationAsIs=function(a){return d("$animateProvider",a,"asIs"),this},this.build=function(){function a(a){var b=a.providerName,c=a.componentName;if("$controllerProvider"===b||"$filterProvider"===b||"$compileProvider"===b||"$animateProvider"===b){var d=h.getProviderComponentDeclaration(b,c);angular.forEach(d.injectedServices,function(a){g.has(a)&&(m[a]=g.get(a))}),n[c]={providerName:b,providerMethod:d.providerMethod,declaration:d.rawDeclaration}}else{if("$provide"!==b)throw"Unsupported provider: "+b;m[c]=g.get(c)}}function c(a){var c=a.providerName,e=a.componentName,f=h.getProviderComponentDeclaration(c,e),i=[];angular.forEach(f.injectedServices,function(c){if(g.has(c)){var e=d(a,c),f=g.get(c),h=b.canInstanceBeMocked(f);if(e&&!h&&"for"===a.dependenciesUsage)throw"Could not mock the dependency explicitly asked to mock: "+c;var j=e&&h;j?k[c]=f:m[c]=f,i.push(c+(j?"Mock":""))}else i.push(c)}),i.push(f.strippedDeclaration),"$provide"===c&&"provider"===f.providerMethod&&(i={$get:i}),n[e]={providerName:c,providerMethod:f.providerMethod,declaration:i}}function d(a,b){var c=a.dependenciesUsage;if("for"===c)return-1!==a.dependencies.indexOf(b);if("except"===c)return-1===a.dependencies.indexOf(b);if(c)throw"Invalid dependencies usage: "+c;return!0}function e(a){return function(b,c,d,e,f){var g={$provide:b,$filterProvider:c,$controllerProvider:d,$compileProvider:e,$animateProvider:f};a(g)}}var j="generatedByNgImprovedTesting#"+l,k={},m={},n={},o=angular.module(j,f.requires);return angular.forEach(i,function(b){"asIs"===b.componentKind?a(b):"withMocks"===b.componentKind&&c(b)}),l+=1,angular.mock.module(e(function(a){angular.forEach(k,function(c,d){var e=b.mockInstance(c);a.$provide.value(d+"Mock",e)}),angular.forEach(m,function(b,c){a.$provide.value(c,b)}),angular.forEach(n,function(b,c){a[b.providerName][b.providerMethod](c,b.declaration)})}),o.name)}}return{forModule:function(a){return new c(a)}}}angular.module("ngImprovedTesting",["ngModuleIntrospector.$q"]);var c=angular.injector(["ng","ngModuleIntrospector"]),b=c.get("moduleIntrospector"),d=b("ng"),e=d.getProviderDeclaration("$qProvider").rawDeclaration,f=angular.injector(["ng"]),g=f.instantiate(e,{});angular.module("ngImprovedTesting.$q",["ngImprovedTesting.internal.config"]).provider("$q",["ngImprovedTestingConfig",function(a){this.$get=["$rootScope","$exceptionHandler",function(b,c){var d=null;a.$qTick&&(d=[],b={$evalAsync:function(a){d.push(a)}});var e=g.$get[g.$get.length-1](b,c);return a.$qTick&&(e.tick=function(){angular.forEach(d,function(a){a()}),d.length=0}),e}]}]);var h={$qTick:!1},i=angular.extend({},h);angular.module("ngImprovedTesting.internal.config",[]).constant("ngImprovedTestingConfig",i).run(function(){angular.extend(i,h)});var j=angular.injector(["ng","ngImprovedTesting.internal.config","ngImprovedTesting.internal.mockCreator","ngImprovedTesting.internal.moduleBuilder"]);window.ngImprovedTestingConfig=j.get("ngImprovedTestingConfig");var k=j.get("mockCreator");window.mockInstance=k.mockInstance,window.ModuleBuilder=j.get("moduleBuilder"),angular.module("ngImprovedTesting.internal.mockCreator",[]).service("mockCreator",a);var l=0;b.$inject=["moduleIntrospector","mockCreator"],angular.module("ngImprovedTesting.internal.moduleBuilder",["ngModuleIntrospector","ngImprovedTesting.internal.mockCreator"]).factory("moduleBuilder",b)}();